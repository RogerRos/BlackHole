<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Selector</title>
    <style>
        /* Estilos CSS aquí */
    </style>
</head>
<body>

<div class="container">
    <h2>File Selector</h2>
    <input type="file" id="fileInput" multiple>
    <button onclick="uploadFiles()">Choose File</button>
    <ul id="fileList"></ul>
</div>

<script>
    // Función para cargar archivos
    function uploadFiles() {
        var files = document.getElementById('fileInput').files;
        var fileList = document.getElementById('fileList');

        for (var i = 0; i < files.length; i++) {
            var file = files[i];
            var fileName = file.name;
            var fileSize = getFileSize(file.size);

            var listItem = document.createElement('li');
            var fileLink = document.createElement('a');
            fileLink.href = URL.createObjectURL(file);
            fileLink.textContent = fileName + ' (' + fileSize + ')';
            fileLink.className = 'file-link';
            listItem.appendChild(fileLink);

            var deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.className = 'delete-btn';
            deleteBtn.onclick = function() {
                listItem.remove();
                updateLocalStorage(); // Actualizar almacenamiento local después de eliminar un archivo
            };
            listItem.appendChild(deleteBtn);

            fileList.appendChild(listItem);
        }

        updateLocalStorage(); // Actualizar almacenamiento local después de cargar archivos
    }

    function getFileSize(size) {
        if (size === 0) return '0 Bytes';
        var k = 1024;
        var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
        var i = Math.floor(Math.log(size) / Math.log(k));
        return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Función para actualizar el almacenamiento local con los archivos cargados
    function updateLocalStorage() {
        var files = [];
        var fileList = document.getElementById('fileList').getElementsByTagName('a');

        for (var i = 0; i < fileList.length; i++) {
            var fileName = fileList[i].textContent.split(' ')[0]; // Obtener nombre de archivo sin tamaño
            files.push(fileName);
        }

        localStorage.setItem('uploadedFiles', JSON.stringify(files)); // Guardar lista de archivos en localStorage
    }

    // Función para cargar archivos guardados en el almacenamiento local al cargar la página
    window.onload = function() {
        var uploadedFiles = JSON.parse(localStorage.getItem('uploadedFiles'));

        if (uploadedFiles) {
            var fileList = document.getElementById('fileList');

            for (var i = 0; i < uploadedFiles.length; i++) {
                var fileName = uploadedFiles[i];
                var listItem = document.createElement('li');
                var fileLink = document.createElement('a');
                fileLink.href = '#'; // Enlace ficticio
                fileLink.textContent = fileName;
                fileLink.className = 'file-link';
                listItem.appendChild(fileLink);

                var deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.className = 'delete-btn';
                deleteBtn.onclick = function() {
                    listItem.remove();
                    updateLocalStorage(); // Actualizar almacenamiento local después de eliminar un archivo
                };
                listItem.appendChild(deleteBtn);

                fileList.appendChild(listItem);
            }
        }
    };
</script>

</body>
</html>
